<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Irregular Verbs List</title>
    <style>
      #display-area {
        width: 80%;
        margin: 20px auto;
        border-collapse: collapse;
        text-align: center;
        font-size: 18px; /* Initial text size */
      }

      table,
      th,
      td {
        border: 2px solid black;
        padding: 8px;
      }

      th {
        background-color: #f2f2f2;
      }

      #controls {
        text-align: center;
        margin-top: 20px;
      }

      button {
        padding: 10px 20px;
        margin: 5px;
        font-size: 16px;
        cursor: pointer;
      }

      #status {
        margin-top: 10px;
        font-weight: bold;
        font-size: 18px;
      }

      #counter {
        font-size: 18px;
        margin-top: 10px;
      }

      footer {
        text-align: center;
        margin-top: 20px;
      }

      #fontSizeControl {
        margin-left: 10px;
      }

      #fontSizeValue {
        font-weight: bold;
      }

      #timerDisplay {
        font-size: 18px;
        font-weight: bold;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Filter Irregular Verbs</h1>
    <label for="filterInput">Enter letter to filter:</label>
    <input
      type="text"
      id="filterInput"
      maxlength="1"
      style="text-transform: uppercase"
    />
    <button id="prevLetterBtn">Previous Letter</button>
    <button id="nextLetterBtn">Next Letter</button>

    <label for="timerInput">Interval (seconds):</label>
    <input
      type="number"
      id="timerInput"
      min="1"
      value="3"
      style="width: 60px"
    />
    <button id="timerDecrease">-</button>
    <button id="timerIncrease">+</button>

    <div id="timerDisplay">Timer: 3 seconds</div>

    <table id="display-area">
      <thead>
        <tr>
          <th>Infinitive</th>
          <th>Simple Past</th>
          <th>Past Participle</th>
          <th>Meaning</th>
        </tr>
      </thead>
      <tbody>
        <!-- Here the verbs will be displayed -->
      </tbody>
    </table>

    <div id="controls">
      <button id="stopBtn">Stop</button>
      <button id="resetBtn">Reset</button>
      <div id="status">Status: Started</div>
    </div>

    <div id="counter">Verb: 1/0</div>
    <!-- Verb counter -->
    <div id="cycleCounter">Cycles: 0</div>
    <!-- Cycle counter -->

    <!-- Footer with text size control -->
    <footer>
      <label for="fontSizeControl">Text size:</label>
      <input
        type="range"
        id="fontSizeControl"
        min="12"
        max="30"
        value="18"
      />
      <span id="fontSizeValue">18</span> px
    </footer>

    <script>
      // List of 15 irregular verbs as an example
      const irregularVerbs = [
        ['abide', 'abode', 'abode', 'to remain'],
        ['arise', 'arose', 'arisen', 'to arise'],
        ['be', 'was/were', 'been', 'to be'],
        ['bear', 'bore', 'born', 'to bear'],
        ['cast', 'cast', 'cast', 'to cast'],
        ['catch', 'caught', 'caught', 'to catch'],
        ['deal', 'dealt', 'dealt', 'to deal'],
        ['dig', 'dug', 'dug', 'to dig'],
      ];

      let index = 0;
      let cycleCount = 0;
      let intervalId;
      let filteredLetter = '';
      let filteredVerbs = [];
      let interval = 3000; // Default interval in milliseconds

      function showVerb() {
        const area = document.querySelector('#display-area tbody');
        area.innerHTML = ''; // Clear display area

        // Filter verbs by the entered letter
        filteredVerbs = irregularVerbs.filter((verb) =>
          verb[0].startsWith(filteredLetter)
        );

        // Calculate total verbs
        const totalVerbs = filteredVerbs.length || irregularVerbs.length;

        // Update the counter
        document.getElementById('counter').innerText = `Verb: ${
          (index % totalVerbs) + 1
        }/${totalVerbs}`;

        // If there are remaining verbs
        if (totalVerbs > 0) {
          const verb = filteredVerbs[index % totalVerbs]; // Cycle through filtered verbs
          const row = `<tr>
                <td>${verb[0]}</td>
                <td>${verb[1]}</td>
                <td>${verb[2]}</td>
                <td>${verb[3]}</td>
            </tr>`;
          area.innerHTML = row;
          index++;
        } else {
          clearInterval(intervalId);
          document.getElementById('status').innerText = 'Status: Stopped';
        }

        // Update cycle count if we have cycled through all verbs
        if (index % irregularVerbs.length === 0) {
          cycleCount++;
          document.getElementById('cycleCounter').innerText = `Cycles: ${cycleCount}`;
        }
      }

      function showAllVerbs() {
        const area = document.querySelector('#display-area tbody');
        area.innerHTML = ''; // Clear display area
        const totalVerbs = filteredLetter
          ? filteredVerbs.length
          : irregularVerbs.length;

        // Show all verbs based on the filter
        const verbsToShow = filteredLetter
          ? filteredVerbs
          : irregularVerbs;

        verbsToShow.forEach((verb) => {
          const row = `<tr>
                <td>${verb[0]}</td>
                <td>${verb[1]}</td>
                <td>${verb[2]}</td>
                <td>${verb[3]}</td>
            </tr>`;
          area.innerHTML += row;
        });

        // Update the counter
        document.getElementById(
          'counter'
        ).innerText = `Verb: ${totalVerbs}/${totalVerbs}`;
        document.getElementById('status').innerText = 'Status: Stopped';
      }

      function updateInterval() {
        const newInterval =
          parseInt(document.getElementById('timerInput').value) * 1000; // Convert to milliseconds
        if (newInterval > 0) {
          interval = newInterval;
          clearInterval(intervalId);
          intervalId = setInterval(showVerb, interval);
          document.getElementById('timerDisplay').innerText = `Timer: ${
            newInterval / 1000
          } seconds`;
        }
      }

      document.getElementById('stopBtn').addEventListener('click', () => {
        clearInterval(intervalId);
        showAllVerbs(); // Show all verbs based on the filter
      });

      document.getElementById('resetBtn').addEventListener('click', () => {
        clearInterval(intervalId);
        index = 0;
        document.getElementById('status').innerText = 'Status: Started';
        showVerb();
        intervalId = setInterval(showVerb, interval);
        cycleCount = 0; // Reset cycle count on reset
        document.getElementById('cycleCounter').innerText = `Cycles: ${cycleCount}`;
      });

      document
        .getElementById('fontSizeControl')
        .addEventListener('input', (event) => {
          const fontSize = event.target.value;
          document.querySelector('#display-area').style.fontSize =
            fontSize + 'px';
          document.getElementById('fontSizeValue').innerText = fontSize;
        });

      document
        .getElementById('filterInput')
        .addEventListener('input', (event) => {
          filteredLetter = event.target.value.toLowerCase(); // Take the letter in lowercase
          index = 0; // Reset index when applying filter
          showVerb(); // Show the first filtered verb
          clearInterval(intervalId); // Clear previous interval
          intervalId = setInterval(showVerb, interval); // Restart the interval
        });

      document
        .getElementById('timerInput')
        .addEventListener('change', updateInterval);

      document.getElementById('nextLetterBtn').addEventListener('click', () => {
        const currentLetter = document.getElementById('filterInput').value;
        if (currentLetter) {
          const nextLetter = String.fromCharCode(currentLetter.charCodeAt(0) + 1);
          document.getElementById('filterInput').value = nextLetter.toUpperCase();
          filteredLetter = nextLetter.toLowerCase();
          index = 0; // Reset index when changing letter
          showVerb();
        }
      });

      document.getElementById('prevLetterBtn').addEventListener('click', () => {
        const currentLetter = document.getElementById('filterInput').value;
        if (currentLetter) {
          const prevLetter = String.fromCharCode(currentLetter.charCodeAt(0) - 1);
          document.getElementById('filterInput').value = prevLetter.toUpperCase();
          filteredLetter = prevLetter.toLowerCase();
          index = 0; // Reset index when changing letter
          showVerb();
        }
      });

      document.getElementById('timerDecrease').addEventListener('click', () => {
        let currentValue = parseInt(document.getElementById('timerInput').value);
        if (currentValue > 1) {
          document.getElementById('timerInput').value = currentValue - 1;
          updateInterval();
        }
      });

      document.getElementById('timerIncrease').addEventListener('click', () => {
        let currentValue = parseInt(document.getElementById('timerInput').value);
        document.getElementById('timerInput').value = currentValue + 1;
        updateInterval();
      });

      // Start displaying verbs
      intervalId = setInterval(showVerb, interval);
      document.getElementById('timerDisplay').innerText = `Timer: ${
        interval / 1000
      } seconds`;
    </script>
  </body>
</html>
